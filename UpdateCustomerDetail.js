const updateProfile = document.getElementById('update'); 
const id = localStorage.getItem('customerId'); 
 
updateProfile.addEventListener('click', (e) => { 
? ? e.preventDefault(); 
? ? const updateCustomerURL = `http://localhost:8801/customer/${id}/update`; 
? ? const getTokenUrl = `http://localhost:8801/customer/issue/${id}`; 
? ? const bearer = "Bearer "; 
? ? const city = document.querySelector('#city').value; 
? ? const state = document.querySelector('#state').value; 
? ? const address = document.querySelector('#address').value; 
 
? ? fetch(getTokenUrl, { 
? ? ? ? "method": "GET", 
? ? ? ? headers: { 
? ? ? ? ? ? 'Content-Type': 'application/json' 
? ? ? ? }, 
? ? }) 
? ? ? ? .then(response => { 
? ? ? ? ? ? console.log(response); 
? ? ? ? ? ? if (response.status === 200) { 
? ? ? ? ? ? ? ? return response.json(); 
? ? ? ? ? ? } else { 
? ? ? ? ? ? ? ? throw new Error(response.status); 
? ? ? ? ? ? } 
? ? ? ? }) 
? ? ? ? .then(data => { 
? ? ? ? ? ? if (!(data.result)) { 
? ? ? ? ? ? ? ? console.log("Get Token Response : ", data.message); 
? ? ? ? ? ? } else { 
? ? ? ? ? ? ? ? fetch(updateCustomerURL, { 
? ? ? ? ? ? ? ? ? ? "method": "PUT", 
? ? ? ? ? ? ? ? ? ? headers: { 
? ? ? ? ? ? ? ? ? ? ? ? 'x-auth-token': bearer + data.message, 
? ? ? ? ? ? ? ? ? ? ? ? 'Content-Type': 'application/json' 
? ? ? ? ? ? ? ? ? ? }, 
? ? ? ? ? ? ? ? ? ? body: JSON.stringify({ 
? ? ? ? ? ? ? ? ? ? ? ? address: address, 
? ? ? ? ? ? ? ? ? ? ? ? city: city, 
? ? ? ? ? ? ? ? ? ? ? ? state: state 
? ? ? ? ? ? ? ? ? ? }) 
? ? ? ? ? ? ? ? }) 
? ? ? ? ? ? ? ? ? ? .then(response => { 
? ? ? ? ? ? ? ? ? ? ? ? console.log(response); 
? ? ? ? ? ? ? ? ? ? ? ? if (response.status === 200) { 
? ? ? ? ? ? ? ? ? ? ? ? ? ? return response.json(); 
? ? ? ? ? ? ? ? ? ? ? ? } else { 
? ? ? ? ? ? ? ? ? ? ? ? ? ? throw new Error(response.status); 
? ? ? ? ? ? ? ? ? ? ? ? } 
? ? ? ? ? ? ? ? ? ? }) 
? ? ? ? ? ? ? ? ? ? .then(details => { 
? ? ? ? ? ? ? ? ? ? ? ? document.getElementById("message").innerText = details.message; 
? ? ? ? ? ? ? ? ? ? }) 
? ? ? ? ? ? } 
? ? ? ? }) 
}) 
