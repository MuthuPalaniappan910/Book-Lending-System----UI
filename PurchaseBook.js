const purchaseButton = document.getElementById('purchase'); 
purchaseButton.addEventListener('click', (e) => { 
? ? e.preventDefault(); 
? ? const numberOfDays = document.querySelector('#days').value; 
? ? const purchaseBookUrl = 'http://localhost:8800/books/book/purchase'; 
 
? ? fetch(purchaseBookUrl, { 
? ? ? ? "method": "POST", 
? ? ? ? headers: { 
? ? ? ? ? ? 'Content-Type': 'application/json' 
? ? ? ? }, 
? ? ? ? body: JSON.stringify({ 
? ? ? ? ? ? customerId: localStorage.getItem('customerId'), 
? ? ? ? ? ? numberOfDays: numberOfDays, 
? ? ? ? ? ? bookId: sessionStorage.getItem('bookId') 
? ? ? ? }) 
? ? }) 
? ? ? ? .then(response => { 
? ? ? ? ? ? console.log(response); 
? ? ? ? ? ? if (response.status === 200) { 
? ? ? ? ? ? ? ? return response.json(); 
? ? ? ? ? ? } else { 
? ? ? ? ? ? ? ? throw new Error(response.status); 
? ? ? ? ? ? } 
? ? ? ? }) 
? ? ? ? .then(data => { 
? ? ? ? ? ? if (data.result) { 
? ? ? ? ? ? ? ? console.log("Purchase Book Response : ", data.message); 
? ? ? ? ? ? } else { 
? ? ? ? ? ? ? ? console.log(data.message); 
? ? ? ? ? ? } 
? ? ? ? ? ? document.getElementById("message").innerText = data.message; 
? ? ? ? }) 
}) 
 
function navigatePurchasePage(e) { 
? ? const bookId = e.target.parentNode.id; 
? ? console.log("Purchase Book ", bookId); 
? ? sessionStorage.setItem("bookId", bookId); 
? ? const path = location.pathname.split('/'); 
? ? path[path.length - 1] = "PurchaseBook.html"; 
? ? location.pathname = path.join('/'); 
? ? route("PurchaseBook.html"); 
} 
